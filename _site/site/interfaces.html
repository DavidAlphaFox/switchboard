<h2 id="switchboard-workers-and-clients">Switchboard Workers and Clients</h2>

<p>Switchboard is intended to be run as a standalone server that connects
to external workers and clients. The worker and client interfaces are
bidirectional, allowing external processes to receive notifications of
new emails, as well as fetch more data about the email. Switchboard
handles concurrent requests to IMAP accounts.</p>

<h3 id="workers-v-clients">Workers v Clients</h3>

<p>Switchboard workers and clients differ by their account access
permissions:</p>

<p>A <em>worker</em> can process emails across all email accounts Switchboard is
connected to. The worker can command Switchboard to connect to
multiple accounts. The connections are not terminated when the worker
dies, instead they must be terminated explicitly. Workers share most
commands with clients, with the caveat that the command arguments must
include an <code>account</code> key-value indicating what account the command
should be applied to.</p>

<p>A <em>client</em> can only connect to and interact with a single email
account via Switchboard. After executing a successful <code>connect</code>
command, the client enters a <code>connected</code> state during which it can’t
execute execute another <code>connect</code> command. While in the <code>connected</code>
state, commands issued are applied to the account to which the client
connected. If the client holds the last reference to the account when
it dies, the account’s IMAP connections are closed. By default, the
credentials are not saved (beware your logs).</p>

<p>Workers and clients can be mixed on a single Switchboard server,
but at the moment due to the IMAP connection sharing and watch
commands being in need of an upgrade, this isn’t recommended.</p>

<h3 id="a-subset-of-jmap">A Subset of JMAP</h3>

<p>At the moment, the Switchboard client interface is a subset of
<a href="http://jmap.io">JMAP</a>, and the worker interface is a variation on
it. The documentation on this page is sufficient to use Switchboard,
and contains links to relevant portions of the JMAP spec. But, if you
are interested in learning more about JMAP, the first 8 sections of
the JMAP spec is very intersting, providing a rationale for using JMAP
over HTTP/websockets, and describing the structure of a JMAP exchange,
the data model, and data types.</p>

<p>A Switchboard worker or client connects to the server over a
websocket. If you’re running Switchboard locally, the URL defaults to
<code>ws://127.0.0.1:8080/clients</code>. Data is encoded as UTF8 JSON. Clients
issue a list of commands to the server in the form
<code>[[${method &lt;string&gt;}, ${args &lt;object&gt;}, ${tag (optional)}], ...]</code>.
The server runs the commands in order, generating and returning a list
of one response per command. The responses take the same form as the
commands. The command descriptions and examples below should help
clarify.</p>

<h3 id="worker-commands">Worker Commands</h3>

<p>Worker commands which are applied to an account, e.g. commands other
than <code>connect</code> and <code>watchAll</code>, require <code>account</code> to be specified in
the command’s arguments.</p>

<h4 id="connect">connect</h4>

<p>A high level description is provided
<a href="http://jmap.io/#transport-and-authentication">here</a>, but the details
have been left up to the implementer. <code>connect</code> accepts the <code>host</code> and
<code>port</code> of the IMAP server, as well as an <code>auth</code> object that is used to
login after connecting to the server. A <code>connected</code> response indicates
that the connection and login was successful.</p>

<p>Using <code>PLAIN</code> auth (fake credentials):</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="o">:</span> <span class="s2">&quot;imap.gmail.com&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;port&quot;</span><span class="o">:</span> <span class="mi">993</span><span class="p">,</span>
                 <span class="s2">&quot;auth&quot;</span><span class="o">:</span> <span class="p">{</span>
                   <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;plain&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;username&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;password&quot;</span><span class="o">:</span> <span class="s2">&quot;secret&quot;</span><span class="p">}}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;connected&quot;</span><span class="p">,</span> <span class="p">{}]]</span></code></pre></div>

<p>Using <code>XOAUTH2</code> auth (fake credentials):</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;connect&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;host&quot;</span><span class="o">:</span> <span class="s2">&quot;imap.gmail.com&quot;</span><span class="p">,</span>
                 <span class="s2">&quot;port&quot;</span><span class="o">:</span> <span class="mi">993</span><span class="p">,</span>
                 <span class="s2">&quot;auth&quot;</span><span class="o">:</span> <span class="p">{</span>
                   <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;xoauth2&quot;</span><span class="p">,</span>
                   <span class="s2">&quot;username&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="p">{</span>
                       <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;refresh&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;token&quot;</span><span class="o">:</span> <span class="s2">&quot;1/kif0yuTDHWu7UKtTCNtgDWTeoj_IYZM-SPmyxNiDCjc&quot;</span><span class="p">,</span>
                       <span class="s2">&quot;url&quot;</span><span class="o">:</span> <span class="s2">&quot;https://accounts.google.com/o/oauth2/token&quot;</span><span class="p">}}}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;connected&quot;</span><span class="p">,</span> <span class="p">{}]]</span></code></pre></div>

<h4 id="watchall">watchAll</h4>

<p>The <code>watchAll</code> command causes the server to send the worker notifications of
all new emails which arrive.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchAll&quot;</span><span class="p">,</span> <span class="p">{}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchingAll&quot;</span><span class="p">,</span> <span class="p">{}]]</span>

<span class="c1">// The server will now send unsolicited responses as new messages arrive</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;newMessage&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;mailboxId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;messageId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1?17&quot;</span><span class="p">}]]</span></code></pre></div>

<h4 id="watchmailboxes">watchMailboxes</h4>

<p>The <code>watchMailboxes</code> command tells the server to create IMAP
connections for the set of mailbox names listed. It is not a part of
the JMAP spec.  If the server failed to create any connections, it
will include a <code>failed</code> key in the response arguments with a list of
failed mailbox names.</p>

<p>Each call of “watchMailboxes” replaces the list of mailboxes being monitored.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX&quot;</span><span class="p">,</span> <span class="s2">&quot;NON-EXISTENT&quot;</span><span class="p">]}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchingMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;failed&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;NON-EXISTENT&quot;</span><span class="p">]}]]</span>

<span class="c1">// The server will send unsolicited responses</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;newMessage&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;mailboxId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1&quot;</span><span class="p">,</span> <span class="s2">&quot;messageId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1?17&quot;</span><span class="p">}]]</span></code></pre></div>

<h4 id="getmailboxeshttpjmapiogetmailboxes"><a href="http://jmap.io/#getmailboxes">getMailboxes</a></h4>

<p>Returns a list of all mailbox objects.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;mailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">,</span>
                   <span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX-1&quot;</span><span class="p">}]}]]</span>

<span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;mailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">}]]</span></code></pre></div>

<!-- TODO - ACL Permissions -->

<h4 id="getmessagelisthttpjmapiogetmessagelist"><a href="http://jmap.io/#getmessagelist">getMessageList</a></h4>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMessageList&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                        <span class="s2">&quot;mailboxId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1&quot;</span><span class="p">}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;messageList&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;messageIds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX!1?1&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?2&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?3&quot;</span><span class="p">]}]]</span></code></pre></div>

<!-- TODO: All of the options, searching. -->

<h4 id="getmessageshttpjmapiogetmessages"><a href="http://jmap.io/#getmessages">getMessages</a></h4>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMessages&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;account&quot;</span><span class="o">:</span> <span class="s2">&quot;emma.nutt@gmail.com&quot;</span><span class="p">,</span>
                     <span class="s2">&quot;ids&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX!1?3&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?4&quot;</span><span class="p">],</span>
                     <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="s2">&quot;from&quot;</span><span class="p">,</span> <span class="s2">&quot;textBody&quot;</span><span class="p">]}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;messages&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="s2">&quot;TODO&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                      <span class="s2">&quot;textBody&quot;</span><span class="o">:</span> <span class="s2">&quot;--bcaec5171e1f3f872b04fa044bc7\r\nContent-Type: text/plain; [...]&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;from&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;YouTube&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;noreply@youtube.com&quot;</span><span class="p">}]</span>
                      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;mail.dispatch.test@gmail.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Pokemon dubstep, Harry Potter in cyberpunk and more &#39;90s remixes on YouTube&quot;</span>
                    <span class="p">},</span> <span class="p">{</span>
                      <span class="s2">&quot;textBody&quot;</span><span class="o">:</span> <span class="s2">&quot;--047d7b86e65445cc6c04fa33c13a\r\nContent-Type: text/plain; [...]&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Google+&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;noreply-68620fcd@plus.google.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;mail.dispatch.test@gmail.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Top suggested Google+ Pages for you&quot;</span>
                    <span class="p">}]}]]</span></code></pre></div>

<h3 id="client-commands">Client Commands</h3>

<p>Unlike worker commands, client commands do not require an <code>account</code>
argument. Instead, the client must issue a connect command for an
account, at which point all commands will be applied to that account.</p>

<h4 id="connect-1">connect</h4>

<p>The client’s connect command is identical to the Worker’s connect
command. When the client issues a successful connect command, it will
not be able to connect to any more accounts, and it will only be able
to issue commands for that account.</p>

<h4 id="watchmailboxes-1">watchMailboxes</h4>

<p>This command is equivalent to the worker’s <code>watchMailboxes</code>, and
tells Switchboard to provide notifications for the list of accounts.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX&quot;</span><span class="p">,</span> <span class="s2">&quot;NON-EXISTENT&quot;</span><span class="p">]}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;watchingMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;failed&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;NON-EXISTENT&quot;</span><span class="p">]}]]</span>

<span class="c1">// The server will send unsolicited responses</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;newMessage&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;mailboxId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1&quot;</span><span class="p">,</span> <span class="s2">&quot;messageId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1?17&quot;</span><span class="p">}]]</span></code></pre></div>

<h4 id="getmailboxeshttpjmapiogetmailboxes-1"><a href="http://jmap.io/#getmailboxes">getMailboxes</a></h4>

<p>Returns a list of all mailbox objects.</p>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMailboxes&quot;</span><span class="p">,</span> <span class="p">{}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;mailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">,</span>
                   <span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX&quot;</span><span class="p">,</span>
                             <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX-1&quot;</span><span class="p">}]}]]</span>

<span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;mailboxes&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="mi">79153751884907</span><span class="p">}]]</span></code></pre></div>

<!-- TODO - ACL Permissions -->

<h4 id="getmessagelisthttpjmapiogetmessagelist-1"><a href="http://jmap.io/#getmessagelist">getMessageList</a></h4>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMessageList&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;mailboxId&quot;</span><span class="o">:</span> <span class="s2">&quot;INBOX!1&quot;</span><span class="p">}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;messageList&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;messageIds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX!1?1&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?2&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?3&quot;</span><span class="p">]}]]</span></code></pre></div>

<!-- TODO: All of the options, searching. -->

<h4 id="getmessageshttpjmapiogetmessages-1"><a href="http://jmap.io/#getmessages">getMessages</a></h4>

<div class="highlight"><pre><code class="javascript"><span class="nx">C</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;getMessages&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;ids&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;INBOX!1?3&quot;</span><span class="p">,</span> <span class="s2">&quot;INBOX!1?4&quot;</span><span class="p">],</span>
                     <span class="s2">&quot;properties&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;subject&quot;</span><span class="p">,</span> <span class="s2">&quot;to&quot;</span><span class="p">,</span> <span class="s2">&quot;from&quot;</span><span class="p">,</span> <span class="s2">&quot;textBody&quot;</span><span class="p">]}]]</span>
<span class="nx">S</span><span class="o">:</span> <span class="p">[[</span><span class="s2">&quot;messages&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;state&quot;</span><span class="o">:</span> <span class="s2">&quot;TODO&quot;</span><span class="p">,</span>
                  <span class="s2">&quot;list&quot;</span><span class="o">:</span> <span class="p">[</span>
                    <span class="p">{</span>
                      <span class="s2">&quot;textBody&quot;</span><span class="o">:</span> <span class="s2">&quot;--bcaec5171e1f3f872b04fa044bc7\r\nContent-Type: text/plain; [...]&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;from&quot;</span><span class="o">:</span><span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;YouTube&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;noreply@youtube.com&quot;</span><span class="p">}]</span>
                      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;mail.dispatch.test@gmail.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Pokemon dubstep, Harry Potter in cyberpunk and more &#39;90s remixes on YouTube&quot;</span>
                    <span class="p">},</span> <span class="p">{</span>
                      <span class="s2">&quot;textBody&quot;</span><span class="o">:</span> <span class="s2">&quot;--047d7b86e65445cc6c04fa33c13a\r\nContent-Type: text/plain; [...]&quot;</span><span class="p">,</span>
                      <span class="s2">&quot;from&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Google+&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;noreply-68620fcd@plus.google.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;to&quot;</span><span class="o">:</span> <span class="p">[{</span><span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;mail.dispatch.test@gmail.com&quot;</span><span class="p">}],</span>
                      <span class="s2">&quot;subject&quot;</span><span class="o">:</span> <span class="s2">&quot;Top suggested Google+ Pages for you&quot;</span>
                    <span class="p">}]}]]</span></code></pre></div>

<p>Next up: <a href="/examples">examples</a>.</p>
